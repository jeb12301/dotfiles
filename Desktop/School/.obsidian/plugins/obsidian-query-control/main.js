/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// src/main.ts
__export(exports, {
  default: () => EmbeddedQueryControlPlugin
});

// node_modules/monkey-around/mjs/index.js
function around(obj, factories) {
  const removers = Object.keys(factories).map((key) => around1(obj, key, factories[key]));
  return removers.length === 1 ? removers[0] : function() {
    removers.forEach((r) => r());
  };
}
function around1(obj, method, createWrapper) {
  const original = obj[method], hadOwn = obj.hasOwnProperty(method);
  let current = createWrapper(original);
  if (original)
    Object.setPrototypeOf(current, original);
  Object.setPrototypeOf(wrapper, current);
  obj[method] = wrapper;
  return remove;
  function wrapper(...args) {
    if (current === original && obj[method] === wrapper)
      remove();
    return current.apply(this, args);
  }
  function remove() {
    if (obj[method] === wrapper) {
      if (hadOwn)
        obj[method] = original;
      else
        delete obj[method];
    }
    if (current === original)
      return;
    current = original;
    Object.setPrototypeOf(wrapper, original || Function);
  }
}

// src/main.ts
var import_obsidian3 = __toModule(require("obsidian"));

// src/search-renderer.ts
var import_obsidian = __toModule(require("obsidian"));
var isFifteenPlus = import_obsidian.requireApiVersion && (0, import_obsidian.requireApiVersion)("0.15.0");
var SearchMarkdownRenderer = class extends import_obsidian.MarkdownRenderer {
  constructor(app, containerEl, match) {
    super(app, containerEl);
    this.app = app;
    this.match = match;
    this.subpath = "";
    this.indent = "";
    this.filePath = isFifteenPlus ? this.match.parentDom.path : this.match.parent.path;
    this.file = isFifteenPlus ? this.match.parentDom.file : this.match.parent.file;
    this.renderer.previewEl.onNodeInserted(() => {
      this.updateOptions();
      return this.renderer.onResize();
    });
  }
  updateOptions() {
    let readableLineLength = this.app.vault.getConfig("readableLineLength");
    this.renderer.previewEl.toggleClass("is-readable-line-width", readableLineLength);
    let foldHeading = this.app.vault.getConfig("foldHeading");
    this.renderer.previewEl.toggleClass("allow-fold-headings", foldHeading);
    let foldIndent = this.app.vault.getConfig("foldIndent");
    this.renderer.previewEl.toggleClass("allow-fold-lists", foldIndent);
    this.renderer.previewEl.toggleClass("rtl", this.app.vault.getConfig("rightToLeft"));
    if (!foldHeading) {
      this.renderer.unfoldAllHeadings();
    }
    if (!foldIndent) {
      this.renderer.unfoldAllLists();
    }
    this.renderer.previewEl.toggleClass("show-frontmatter", this.app.vault.getConfig("showFrontmatter"));
    let tabSize = this.app.vault.getConfig("tabSize");
    this.renderer.previewEl.style.tabSize = String(tabSize);
    this.renderer.rerender();
  }
  onRenderComplete() {
  }
  getFile() {
    return this.match.parent.file;
  }
  edit(content) {
    return __async(this, null, function* () {
      var _a;
      this.renderer.set(content);
      let cachedContent = yield this.app.vault.cachedRead(this.file);
      let matchContent = cachedContent.slice(this.match.start, this.match.end);
      let leadingSpaces = (_a = matchContent.match(/^\s+/g)) == null ? void 0 : _a.first();
      if (leadingSpaces) {
        content = content.replace(/^/gm, leadingSpaces);
      }
      let before = cachedContent.slice(0, this.match.start);
      let after = cachedContent.slice(this.match.end, this.match.parent.content.length);
      var combinedContent = before + content + after;
      this.app.vault.modify(this.file, combinedContent);
    });
  }
};

// src/settings.ts
var import_obsidian2 = __toModule(require("obsidian"));

// src/utils.ts
var translate = i18next.t.bind(i18next);

// src/settings.ts
var DEFAULT_SETTINGS = {
  defaultCollapse: false,
  defaultShowContext: false,
  defaultHideTitle: false,
  defaultHideResults: false,
  defaultRenderMarkdown: false,
  defaultSortOrder: "alphabetical"
};
var sortOptions = {
  alphabetical: translate("plugins.file-explorer.label-sort-a-to-z"),
  alphabeticalReverse: translate("plugins.file-explorer.label-sort-z-to-a"),
  byModifiedTime: translate("plugins.file-explorer.label-sort-new-to-old"),
  byModifiedTimeReverse: translate("plugins.file-explorer.label-sort-old-to-new"),
  byCreatedTime: translate("plugins.file-explorer.label-sort-created-new-to-old"),
  byCreatedTimeReverse: translate("plugins.file-explorer.label-sort-created-old-to-new")
};
var SettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  hide() {
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian2.Setting(containerEl).setName("Collapse query results by default").addToggle((toggle) => toggle.setValue(this.plugin.settings.defaultCollapse).onChange((value) => {
      this.plugin.settings.defaultCollapse = value;
      this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("Show additional query result context by default").addToggle((toggle) => toggle.setValue(this.plugin.settings.defaultShowContext).onChange((value) => {
      this.plugin.settings.defaultShowContext = value;
      this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("Hide query title by default").addToggle((toggle) => toggle.setValue(this.plugin.settings.defaultHideTitle).onChange((value) => {
      this.plugin.settings.defaultHideTitle = value;
      this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("Hide query results by default").addToggle((toggle) => toggle.setValue(this.plugin.settings.defaultHideResults).onChange((value) => {
      this.plugin.settings.defaultHideResults = value;
      this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("Render results as Markdown by default").addToggle((toggle) => toggle.setValue(this.plugin.settings.defaultRenderMarkdown).onChange((value) => {
      this.plugin.settings.defaultRenderMarkdown = value;
      this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("Default query result sort order").addDropdown((cb) => {
      cb.addOptions(sortOptions);
      cb.setValue(this.plugin.settings.defaultSortOrder);
      cb.onChange((value) => __async(this, null, function* () {
        this.plugin.settings.defaultSortOrder = value;
        yield this.plugin.saveSettings();
      }));
    });
  }
};

// src/main.ts
var isFifteenPlus2 = import_obsidian3.requireApiVersion && (0, import_obsidian3.requireApiVersion)("0.15.0");
var backlinkDoms = new WeakMap();
var EmbeddedQueryControlPlugin = class extends import_obsidian3.Plugin {
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      let plugin = this;
      this.registerSettingsTab();
      this.register(around(this.app.viewRegistry.constructor.prototype, {
        registerView(old) {
          return function(type, viewCreator, ...args) {
            plugin.app.workspace.trigger("view-registered", type, viewCreator);
            return old.call(this, type, viewCreator, ...args);
          };
        }
      }));
      let uninstall;
      if (!this.app.workspace.layoutReady) {
        let eventRef = this.app.workspace.on("view-registered", (type, viewCreator) => {
          if (type !== "search")
            return;
          this.app.workspace.offref(eventRef);
          let leaf = new import_obsidian3.WorkspaceLeaf(plugin.app);
          let searchView = viewCreator(leaf);
          plugin.patchNativeSearch(searchView);
          let uninstall2 = around(import_obsidian3.Modal.prototype, {
            open(old) {
              return function(...args) {
                plugin.SearchResultsExport = this.constructor;
                return;
              };
            }
          });
          searchView.onCopyResultsClick(new MouseEvent(null));
          uninstall2();
        });
      } else {
        this.getSearchExport();
      }
      this.register(uninstall = around(import_obsidian3.Component.prototype, {
        addChild(old) {
          return function(child, ...args) {
            try {
              if (!plugin.isSearchPatched && child instanceof import_obsidian3.Component && child.hasOwnProperty("searchQuery") && child.hasOwnProperty("sourcePath") && child.hasOwnProperty("dom")) {
                let EmbeddedSearch = child;
                plugin.patchSearchView(EmbeddedSearch);
                plugin.isSearchPatched = true;
              }
              if (child instanceof import_obsidian3.Component && child.hasOwnProperty("backlinkDom")) {
                let backlinks = child;
                backlinkDoms.set(backlinks.backlinkDom.el.closest(".backlink-pane"), child);
                if (!plugin.isBacklinksPatched) {
                  plugin.patchBacklinksView(backlinks);
                  plugin.isBacklinksPatched = true;
                }
              }
            } catch (err) {
              console.log(err);
            }
            const result = old.call(this, child, ...args);
            return result;
          };
        }
      }));
    });
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
  registerSettingsTab() {
    this.settingsTab = new SettingTab(this.app, this);
    this.addSettingTab(this.settingsTab);
  }
  getSearchExport() {
    var _a, _b;
    const plugin = this;
    let searchView = (_b = (_a = this.app.workspace.getLeavesOfType("search")) == null ? void 0 : _a.first()) == null ? void 0 : _b.view;
    let uninstall = around(import_obsidian3.Modal.prototype, {
      open(old) {
        return function(...args) {
          plugin.SearchResultsExport = this.constructor;
          return;
        };
      }
    });
    searchView == null ? void 0 : searchView.onCopyResultsClick(new MouseEvent(null));
    uninstall();
  }
  onunload() {
  }
  patchNativeSearch(searchView) {
    const plugin = this;
    this.register(around(searchView.constructor.prototype, {
      onResize(old) {
        return function(...args) {
          var _a;
          const _children = isFifteenPlus2 ? (_a = this.dom.vChildren) == null ? void 0 : _a._children : this.dom.children;
          if (this.dom.el.clientWidth === 0) {
            _children.forEach((child) => {
              child.setCollapse(true, false);
            });
            this.dom.hidden = true;
          } else if (this.dom.hidden) {
            this.dom.hidden = false;
            setTimeout(() => {
              _children.forEach((child) => {
                child.setCollapse(this.dom.collapseAll, false);
              });
            }, 100);
          }
          return old.call(this, ...args);
        };
      },
      stopSearch(old) {
        return function(...args) {
          const result = old.call(this, ...args);
          if (this.renderComponent) {
            this.renderComponent.unload();
            this.renderComponent = new import_obsidian3.Component();
          }
          return result;
        };
      },
      addChild(old) {
        return function(...args) {
          try {
            if (!this.patched) {
              if (!this.renderComponent) {
                this.renderComponent = new import_obsidian3.Component();
                this.renderComponent.load();
              }
              this.patched = true;
              this.dom.parent = this;
              plugin.patchSearchResultDOM(this.dom.constructor);
              this.setRenderMarkdown = function(value) {
                var _a;
                const _children = isFifteenPlus2 ? (_a = this.dom.vChildren) == null ? void 0 : _a._children : this.dom.children;
                this.dom.renderMarkdown = value;
                _children.forEach((child) => {
                  child.renderContentMatches();
                });
                this.dom.infinityScroll.invalidateAll();
                this.dom.childrenEl.toggleClass("cm-preview-code-block", value);
                this.dom.childrenEl.toggleClass("is-rendered", value);
              };
              let allSettings = {
                renderMarkdown: plugin.settings.defaultRenderMarkdown
              };
              if (!this.settings)
                this.settings = {};
              Object.entries(allSettings).forEach(([setting, defaultValue]) => {
                if (!this.settings.hasOwnProperty(setting)) {
                  this.settings[setting] = defaultValue;
                } else if (setting === "sort" && !sortOptions.hasOwnProperty(this.settings.sort)) {
                  this.settings[setting] = defaultValue;
                }
              });
              this.setRenderMarkdown(this.settings.renderMarkdown);
            } else {
            }
          } catch (err) {
            console.log(err);
          }
          const result = old.call(this, ...args);
          return result;
        };
      }
    }));
  }
  patchSearchResultDOM(SearchResult) {
    const plugin = this;
    let uninstall = around(SearchResult.prototype, {
      addResult(old) {
        return function(...args) {
          uninstall();
          const result = old.call(this, ...args);
          let SearchResultItem2 = result.constructor;
          if (!plugin.isSearchResultItemPatched)
            plugin.patchSearchResultItem(SearchResultItem2);
          return result;
        };
      }
    });
    this.register(uninstall);
    this.register(around(SearchResult.prototype, {
      startLoader(old) {
        return function(...args) {
          var _a, _b;
          try {
            let containerEl = this.el.closest(".backlink-pane");
            let backlinksInstance = backlinkDoms.get(containerEl);
            if (containerEl && backlinksInstance) {
              if (backlinksInstance.patched)
                return;
              handleBacklinks(this, plugin, containerEl, backlinksInstance);
              return;
            }
            if (!this.patched && ((_a = this.el.parentElement) == null ? void 0 : _a.hasClass("internal-query"))) {
              if ((_b = this.el) == null ? void 0 : _b.closest(".internal-query")) {
                this.patched = true;
                let defaultHeaderEl = this.el.parentElement.querySelector(".internal-query-header");
                this.setExtraContext = function(value) {
                  var _a2;
                  const _children = isFifteenPlus2 ? (_a2 = this.vChildren) == null ? void 0 : _a2._children : this.children;
                  this.extraContext = value;
                  _children.forEach((child) => {
                    child.setExtraContext(value);
                  });
                  this.infinityScroll.invalidateAll();
                };
                this.setTitleDisplay = function(value) {
                  this.showTitle = value;
                  defaultHeaderEl.toggleClass("is-hidden", value);
                };
                this.setResultsDisplay = function(value) {
                  this.showResults = value;
                  this.el.toggleClass("is-hidden", value);
                };
                this.setRenderMarkdown = function(value) {
                  var _a2;
                  this.renderMarkdown = value;
                  const _children = isFifteenPlus2 ? (_a2 = this.vChildren) == null ? void 0 : _a2._children : this.children;
                  _children.forEach((child) => {
                    child.renderContentMatches();
                  });
                  this.infinityScroll.invalidateAll();
                  this.childrenEl.toggleClass("cm-preview-code-block", value);
                  this.childrenEl.toggleClass("is-rendered", value);
                };
                this.setCollapseAll = function(value) {
                  var _a2;
                  const _children = isFifteenPlus2 ? (_a2 = this.vChildren) == null ? void 0 : _a2._children : this.children;
                  this.collapseAll = value;
                  _children.forEach((child) => {
                    child.setCollapse(value, false);
                  });
                  this.infinityScroll.invalidateAll();
                };
                this.setSortOrder = (sortType) => {
                  this.sortOrder = sortType;
                  this.changed();
                  this.infinityScroll.invalidateAll();
                };
                this.onCopyResultsClick = (event) => {
                  event.preventDefault();
                  new plugin.SearchResultsExport(this.app, this).open();
                };
                let allSettings = {
                  title: plugin.settings.defaultHideResults,
                  collapsed: plugin.settings.defaultCollapse,
                  context: plugin.settings.defaultShowContext,
                  hideTitle: plugin.settings.defaultHideTitle,
                  hideResults: plugin.settings.defaultHideResults,
                  renderMarkdown: plugin.settings.defaultRenderMarkdown,
                  sort: plugin.settings.defaultSortOrder
                };
                if (!this.settings)
                  this.settings = {};
                Object.entries(allSettings).forEach(([setting, defaultValue]) => {
                  if (!this.settings.hasOwnProperty(setting)) {
                    this.settings[setting] = defaultValue;
                  } else if (setting === "sort" && !sortOptions.hasOwnProperty(this.settings.sort)) {
                    this.settings[setting] = defaultValue;
                  }
                });
                this.setExtraContext(this.settings.context);
                this.sortOrder = this.settings.sort;
                this.setCollapseAll(this.settings.collapsed);
                this.setTitleDisplay(this.settings.hideTitle);
                this.setRenderMarkdown(this.settings.renderMarkdown);
                this.setResultsDisplay(this.settings.hideResults);
              } else {
              }
            }
          } catch (err) {
            console.log(err);
          }
          const result = old.call(this, ...args);
          return result;
        };
      }
    }));
  }
  patchSearchResultItem(SearchResultItemClass) {
    this.isSearchResultItemPatched = true;
    const plugin = this;
    let uninstall = around(SearchResultItemClass.prototype, {
      onResultClick(old) {
        return function(event, e, ...args) {
          if (event.target instanceof HTMLElement && (event.target.hasClass("internal-link") || event.target.hasClass("task-list-item-checkbox") || event.target.hasClass("admonition-title-content"))) {
          } else {
            return old.call(this, event, e, ...args);
          }
        };
      },
      renderContentMatches(old) {
        return function(...args) {
          var _a;
          const result = old.call(this, ...args);
          const _children = isFifteenPlus2 ? (_a = this.vChildren) == null ? void 0 : _a._children : this.children;
          if (!plugin.isSearchResultItemMatchPatched && _children.length) {
            let SearchResultItemMatch = _children.first().constructor;
            plugin.patchSearchResultItemMatch(SearchResultItemMatch);
          }
          return result;
        };
      }
    });
    plugin.register(uninstall);
  }
  patchSearchResultItemMatch(SearchResultItemMatch) {
    this.isSearchResultItemMatchPatched = true;
    const plugin = this;
    plugin.register(around(SearchResultItemMatch.prototype, {
      render(old) {
        return function(...args) {
          var _a;
          let _parent = isFifteenPlus2 ? this.parentDom : this.parent;
          let content = _parent.content.substring(this.start, this.end).replace("```query", "\\`\\`\\`query");
          let leadingSpaces = (_a = content.match(/^\s+/g)) == null ? void 0 : _a.first();
          if (leadingSpaces) {
            content = content.replace(new RegExp(`^${leadingSpaces}`, "gm"), "");
          }
          let parentComponent = _parent.parent.parent;
          if (parentComponent && _parent.parent.renderMarkdown) {
            let component = parentComponent == null ? void 0 : parentComponent.renderComponent;
            this.el.empty();
            let renderer = new SearchMarkdownRenderer(plugin.app, this.el, this);
            renderer.onRenderComplete = () => {
              var _a2;
              (_a2 = _parent == null ? void 0 : _parent.parent) == null ? void 0 : _a2.infinityScroll.measure(_parent, this);
            };
            component.addChild(renderer);
            renderer.renderer.set(content);
          } else {
            return old.call(this, ...args);
          }
        };
      }
    }));
  }
  patchSearchView(embeddedSearch) {
    const plugin = this;
    const EmbeddedSearch = embeddedSearch.constructor;
    const SearchResult = embeddedSearch.dom.constructor;
    this.register(around(EmbeddedSearch.prototype, {
      onunload(old) {
        return function(...args) {
          if (this.renderComponent) {
            this.renderComponent.unload();
            this.dom = null;
            this.queue = null;
            this.renderComponent = null;
            this._children = null;
            this.containerEl = null;
          }
          const result = old.call(this, ...args);
          return result;
        };
      },
      onload(old) {
        return function(...args) {
          try {
            if (!this.renderComponent) {
              this.renderComponent = new import_obsidian3.Component();
              this.renderComponent.load();
            }
            this.dom.parent = this;
            let defaultHeaderEl = this.containerEl.parentElement.querySelector(".internal-query-header");
            let matches = this.query.matchAll(/^(?<key>collapsed|context|hideTitle|renderMarkdown|hideResults|sort|title):\s*(?<value>.+?)$/gm);
            let settings = {};
            for (let match of matches) {
              let value = match.groups.value.toLowerCase();
              if (value === "true" || value === "false") {
                match.groups.value = value === "true";
              }
              settings[match.groups.key] = match.groups.value;
            }
            this.query = this.query.replace(/^((collapsed|context|hideTitle|renderMarkdown|hideResults|sort|title):.+?)$/gm, "").trim();
            defaultHeaderEl.setText(settings.title || this.query);
            this.dom.settings = settings;
          } catch (e) {
          }
          const result = old.call(this, ...args);
          return result;
        };
      }
    }));
    this.patchSearchResultDOM(SearchResult);
  }
  patchBacklinksView(backlinks) {
    const plugin = this;
    const Backlink = backlinks.constructor;
    const BacklinkDOM = backlinks.backlinkDom.constructor;
    this.register(around(Backlink.prototype, {
      onunload(old) {
        return function(...args) {
          if (this.renderComponent) {
            this.renderComponent.unload();
            this.dom = null;
            this.queue = null;
            this.renderComponent = null;
            this._children = null;
            this.containerEl = null;
          }
          const result = old.call(this, ...args);
          return result;
        };
      },
      onload(old) {
        return function(...args) {
          try {
            if (!this.renderComponent) {
              this.renderComponent = new import_obsidian3.Component();
              this.renderComponent.load();
            }
            this.backlinkDom.parent = this;
            this.unlinkedDom.parent = this;
            let settings = {};
            this.dom.settings = settings;
          } catch (e) {
          }
          const result = old.call(this, ...args);
          return result;
        };
      }
    }));
    this.patchSearchResultDOM(BacklinkDOM);
  }
};
function handleBacklinks(instance, plugin, containerEl, backlinksInstance) {
  if (backlinksInstance) {
    backlinksInstance.patched = true;
    let defaultHeaderEl = containerEl.querySelector(".internal-query-header") || containerEl.querySelector(".nav-header");
    instance.setRenderMarkdown = function(value) {
      const doms = [backlinksInstance.backlinkDom, backlinksInstance.unlinkedDom];
      doms.forEach((dom) => {
        var _a;
        dom.renderMarkdown = value;
        const _children = isFifteenPlus2 ? (_a = dom.vChildren) == null ? void 0 : _a._children : dom.children;
        _children.forEach((child) => {
          child.renderContentMatches();
        });
        dom.infinityScroll.invalidateAll();
        dom.childrenEl.toggleClass("cm-preview-code-block", value);
        dom.childrenEl.toggleClass("is-rendered", value);
      });
      this.renderMarkdownButtonEl.toggleClass("is-active", value);
    };
    instance.onCopyResultsClick = (event) => {
      event.preventDefault();
      new plugin.SearchResultsExport(instance.app, instance).open();
    };
    instance.renderMarkdownButtonEl = backlinksInstance.headerDom.addNavButton("reading-glasses", "Render Markdown", () => {
      return instance.setRenderMarkdown(!instance.renderMarkdown);
    });
    backlinksInstance.headerDom.addNavButton("documents", "Copy results", instance.onCopyResultsClick.bind(instance));
    let allSettings = {
      title: plugin.settings.defaultHideResults,
      collapsed: plugin.settings.defaultCollapse,
      context: plugin.settings.defaultShowContext,
      hideTitle: plugin.settings.defaultHideTitle,
      hideResults: plugin.settings.defaultHideResults,
      renderMarkdown: plugin.settings.defaultRenderMarkdown,
      sort: plugin.settings.defaultSortOrder
    };
    if (!instance.settings)
      instance.settings = {};
    Object.entries(allSettings).forEach(([setting, defaultValue]) => {
      if (!instance.settings.hasOwnProperty(setting)) {
        instance.settings[setting] = defaultValue;
      } else if (setting === "sort" && !sortOptions.hasOwnProperty(instance.settings.sort)) {
        instance.settings[setting] = defaultValue;
      }
    });
    backlinksInstance.setExtraContext(instance.settings.context);
    backlinksInstance.sortOrder = instance.settings.sort;
    backlinksInstance.setCollapseAll(instance.settings.collapsed);
    instance.setRenderMarkdown(instance.settings.renderMarkdown);
  } else {
  }
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL21haW4udHMiLCAiLi4vbm9kZV9tb2R1bGVzL21vbmtleS1hcm91bmQvbWpzL2luZGV4LmpzIiwgIi4uL3NyYy9zZWFyY2gtcmVuZGVyZXIudHMiLCAiLi4vc3JjL3NldHRpbmdzLnRzIiwgIi4uL3NyYy91dGlscy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgYXJvdW5kIH0gZnJvbSBcIm1vbmtleS1hcm91bmRcIjtcclxuaW1wb3J0IHtcclxuICBDb21wb25lbnQsXHJcbiAgRW1iZWRkZWRTZWFyY2hDbGFzcyxcclxuICBNb2RhbCxcclxuICBQbHVnaW4sXHJcbiAgLy8gU2VhcmNoSGVhZGVyRE9NLFxyXG4gIFNlYXJjaFJlc3VsdERPTSxcclxuICBTZWFyY2hSZXN1bHRJdGVtLFxyXG4gIFNlYXJjaFZpZXcsXHJcbiAgVmlld0NyZWF0b3IsXHJcbiAgV29ya3NwYWNlTGVhZixcclxuICByZXF1aXJlQXBpVmVyc2lvbixcclxuICBCYWNrbGlua3NDbGFzcyxcclxuICBCYWNrbGlua0RPTUNsYXNzLFxyXG59IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBTZWFyY2hNYXJrZG93blJlbmRlcmVyIH0gZnJvbSBcIi4vc2VhcmNoLXJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MsIEVtYmVkZGVkUXVlcnlDb250cm9sU2V0dGluZ3MsIFNldHRpbmdUYWIsIHNvcnRPcHRpb25zIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgdHJhbnNsYXRlIH0gZnJvbSBcIi4vdXRpbHNcIjtcclxuXHJcbi8vIExpdmUgUHJldmlldyBjcmVhdGVzIGFuIGVtYmVkZGVkIHF1ZXJ5IGJsb2NrXHJcbi8vIExQIGNhbGxzIGFkZENoaWxkIHdpdGggYW4gaW5zdGFuY2Ugb2YgdGhlIEVtYmVkZGVkU2VhcmNoIGNsYXNzXHJcblxyXG4vLyBFbWJlZGRlZFNlYXJjaCBgb25sb2FkYCBpcyBwYXRjaGVkIHRvIGFkZCBhIG5hdiBiYXJcclxuLy8gYSBuZXcgY29tcG9uZW50IGlzIGFkZGVkIHRvIGhhbmRsZSB0aGUgbGlmZWN5Y2xlIG9mIHRoZSByZW5kZXJlZCBtYXJrZG93biBlbGVtZW50c1xyXG5cclxuLy8gRW1iZWRkZWRTZWFyY2ggaGFzIGEgYGRvbWAgcHJvcGVydHkgd2hpY2ggaG9sZHMgYW4gaW5zdGFuY2Ugb2Z0aGUgU2VhcmNoUmVzdWx0RE9NIGNsYXNzXHJcbi8vIFNlYXJjaFJlc3VsdERPTSBoYXMgY2hpbGRyZW4gd2hpY2ggYXJlIG9mIHR5cGUgU2VhcmNoUmVzdWx0SXRlbVxyXG5cclxuLy8gU2VhcmNoUmVzdWx0SXRlbSBoYXMgY2hpbGRyZW4gd2hpY2ggYXJlIG9mIHR5cGUgU2VhcmNoUmVzdWx0SXRlbU1hdGNoXHJcbi8vIFRoZXJlIGlzIG9uZSBTZWFyY2hSZXN1bHRJdGVtIHBlciBtYXRjaGVkIFRGaWxlXHJcblxyXG4vLyBTZWFyY2hSZXN1bHRJdGVtTWF0Y2ggaGFzIGEgcmVuZGVyKCkgbWV0aG9kIHdoaWNoIGlzIHVzZWQgdG8gcmVuZGVyIG1hdGNoZXNcclxuLy8gVGhlcmUgaXMgYSBTZWFyY2hSZXN1bHRJdGVtTWF0Y2ggZm9yIGV2ZXJ5IG1hdGNoIGZvdW5kIHdpdGhpbiBhIFRGaWxlXHJcblxyXG4vLyBIaWVyYXJjaHlcclxuLy8gLSBMaXZlUHJldmlld0RPTVxyXG4vLyAgIC0gRW1iZWRkZWRTZWFyY2hcclxuLy8gICAgIC0gU2VhcmNoUmVzdWx0RE9NXHJcbi8vICAgICAgIC0gU2VhcmNoUmVzdWx0SXRlbVxyXG4vLyAgICAgICAgIC0gU2VhcmNoUmVzdWx0SXRlbU1hdGNoXHJcblxyXG5jb25zdCBpc0ZpZnRlZW5QbHVzID0gcmVxdWlyZUFwaVZlcnNpb24gJiYgcmVxdWlyZUFwaVZlcnNpb24oXCIwLjE1LjBcIik7XHJcblxyXG4vLyBjb25zdCBuYXZCYXJzID0gbmV3IFdlYWtNYXA8SFRNTEVsZW1lbnQsIFNlYXJjaEhlYWRlckRPTT4oKTtcclxuY29uc3QgYmFja2xpbmtEb21zID0gbmV3IFdlYWtNYXA8SFRNTEVsZW1lbnQsIGFueT4oKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVtYmVkZGVkUXVlcnlDb250cm9sUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuICAvLyBTZWFyY2hIZWFkZXJET006IHR5cGVvZiBTZWFyY2hIZWFkZXJET007XHJcbiAgU2VhcmNoUmVzdWx0c0V4cG9ydDogYW55O1xyXG4gIHNldHRpbmdzOiBFbWJlZGRlZFF1ZXJ5Q29udHJvbFNldHRpbmdzO1xyXG4gIHNldHRpbmdzVGFiOiBTZXR0aW5nVGFiO1xyXG4gIGlzU2VhcmNoUmVzdWx0SXRlbVBhdGNoZWQ6IGJvb2xlYW47XHJcbiAgaXNTZWFyY2hSZXN1bHRJdGVtTWF0Y2hQYXRjaGVkOiBib29sZWFuO1xyXG4gIGlzQmFja2xpbmtzUGF0Y2hlZDogYm9vbGVhbjtcclxuICBpc1NlYXJjaFBhdGNoZWQ6IGJvb2xlYW47XHJcblxyXG4gIGFzeW5jIG9ubG9hZCgpIHtcclxuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcbiAgICBsZXQgcGx1Z2luID0gdGhpcztcclxuICAgIHRoaXMucmVnaXN0ZXJTZXR0aW5nc1RhYigpO1xyXG4gICAgdGhpcy5yZWdpc3RlcihcclxuICAgICAgYXJvdW5kKHRoaXMuYXBwLnZpZXdSZWdpc3RyeS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHtcclxuICAgICAgICByZWdpc3RlclZpZXcob2xkOiBhbnkpIHtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodHlwZTogc3RyaW5nLCB2aWV3Q3JlYXRvcjogVmlld0NyZWF0b3IsIC4uLmFyZ3M6IHVua25vd25bXSkge1xyXG4gICAgICAgICAgICBwbHVnaW4uYXBwLndvcmtzcGFjZS50cmlnZ2VyKFwidmlldy1yZWdpc3RlcmVkXCIsIHR5cGUsIHZpZXdDcmVhdG9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIG9sZC5jYWxsKHRoaXMsIHR5cGUsIHZpZXdDcmVhdG9yLCAuLi5hcmdzKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSxcclxuICAgICAgfSlcclxuICAgICk7XHJcbiAgICBsZXQgdW5pbnN0YWxsOiAoKSA9PiB2b2lkO1xyXG4gICAgaWYgKCF0aGlzLmFwcC53b3Jrc3BhY2UubGF5b3V0UmVhZHkpIHtcclxuICAgICAgbGV0IGV2ZW50UmVmID0gdGhpcy5hcHAud29ya3NwYWNlLm9uKFwidmlldy1yZWdpc3RlcmVkXCIsICh0eXBlOiBzdHJpbmcsIHZpZXdDcmVhdG9yOiBWaWV3Q3JlYXRvcikgPT4ge1xyXG4gICAgICAgIGlmICh0eXBlICE9PSBcInNlYXJjaFwiKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9mZnJlZihldmVudFJlZik7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZSB3ZSBuZWVkIGEgbGVhZiBiZWZvcmUgYW55IGxlYWZzIGV4aXN0cyBpbiB0aGUgd29ya3NwYWNlLCBzbyB3ZSBjcmVhdGUgb25lIGZyb20gc2NyYXRjaFxyXG4gICAgICAgIGxldCBsZWFmID0gbmV3IFdvcmtzcGFjZUxlYWYocGx1Z2luLmFwcCk7XHJcbiAgICAgICAgbGV0IHNlYXJjaFZpZXcgPSB2aWV3Q3JlYXRvcihsZWFmKSBhcyBTZWFyY2hWaWV3O1xyXG4gICAgICAgIHBsdWdpbi5wYXRjaE5hdGl2ZVNlYXJjaChzZWFyY2hWaWV3KTtcclxuICAgICAgICBsZXQgdW5pbnN0YWxsID0gYXJvdW5kKE1vZGFsLnByb3RvdHlwZSwge1xyXG4gICAgICAgICAgb3BlbihvbGQ6IGFueSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICAgICAgICAgICAgcGx1Z2luLlNlYXJjaFJlc3VsdHNFeHBvcnQgPSB0aGlzLmNvbnN0cnVjdG9yO1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc2VhcmNoVmlldy5vbkNvcHlSZXN1bHRzQ2xpY2sobmV3IE1vdXNlRXZlbnQobnVsbCkpO1xyXG4gICAgICAgIHVuaW5zdGFsbCgpO1xyXG4gICAgICAgIC8vIHBsdWdpbi5TZWFyY2hIZWFkZXJET00gPSBzZWFyY2hWaWV3LmhlYWRlckRvbS5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgU2VhcmNoSGVhZGVyRE9NO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZ2V0U2VhcmNoRXhwb3J0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVGhlIG9ubHkgd2F5IHRvIG9idGFpbiB0aGUgRW1iZWRkZWRTZWFyY2ggY2xhc3MgaXMgdG8gY2F0Y2ggaXQgd2hpbGUgaXQncyBiZWluZyBhZGRlZCB0byBhIHBhcmVudCBjb21wb25lbnRcclxuICAgIC8vIFRoZSBmb2xsb3dpbmcgd2lsbCBwYXRjaCBDb21wb25lbnQuYWRkQ2hpbGQgYW5kIHdpbGwgcmVtb3ZlIGl0c2VsZiBvbmNlIGl0IGZpbmRzIGFuZCBwYXRjaGVzIEVtYmVkZGVkU2VhcmNoXHJcbiAgICB0aGlzLnJlZ2lzdGVyKFxyXG4gICAgICAodW5pbnN0YWxsID0gYXJvdW5kKENvbXBvbmVudC5wcm90b3R5cGUsIHtcclxuICAgICAgICBhZGRDaGlsZChvbGQ6IGFueSkge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjaGlsZDogdW5rbm93biwgLi4uYXJnczogYW55W10pIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAhcGx1Z2luLmlzU2VhcmNoUGF0Y2hlZCAmJlxyXG4gICAgICAgICAgICAgICAgY2hpbGQgaW5zdGFuY2VvZiBDb21wb25lbnQgJiZcclxuICAgICAgICAgICAgICAgIGNoaWxkLmhhc093blByb3BlcnR5KFwic2VhcmNoUXVlcnlcIikgJiZcclxuICAgICAgICAgICAgICAgIGNoaWxkLmhhc093blByb3BlcnR5KFwic291cmNlUGF0aFwiKSAmJlxyXG4gICAgICAgICAgICAgICAgY2hpbGQuaGFzT3duUHJvcGVydHkoXCJkb21cIilcclxuICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIGxldCBFbWJlZGRlZFNlYXJjaCA9IGNoaWxkIGFzIEVtYmVkZGVkU2VhcmNoQ2xhc3M7XHJcbiAgICAgICAgICAgICAgICBwbHVnaW4ucGF0Y2hTZWFyY2hWaWV3KEVtYmVkZGVkU2VhcmNoKTtcclxuICAgICAgICAgICAgICAgIHBsdWdpbi5pc1NlYXJjaFBhdGNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBDb21wb25lbnQgJiYgY2hpbGQuaGFzT3duUHJvcGVydHkoXCJiYWNrbGlua0RvbVwiKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGJhY2tsaW5rcyA9IGNoaWxkIGFzIEJhY2tsaW5rc0NsYXNzO1xyXG4gICAgICAgICAgICAgICAgYmFja2xpbmtEb21zLnNldChiYWNrbGlua3MuYmFja2xpbmtEb20uZWwuY2xvc2VzdChcIi5iYWNrbGluay1wYW5lXCIpLCBjaGlsZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXBsdWdpbi5pc0JhY2tsaW5rc1BhdGNoZWQpIHtcclxuICAgICAgICAgICAgICAgICAgcGx1Z2luLnBhdGNoQmFja2xpbmtzVmlldyhiYWNrbGlua3MpO1xyXG4gICAgICAgICAgICAgICAgICBwbHVnaW4uaXNCYWNrbGlua3NQYXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb2xkLmNhbGwodGhpcywgY2hpbGQsIC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9LFxyXG4gICAgICB9KSlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcbiAgfVxyXG5cclxuICByZWdpc3RlclNldHRpbmdzVGFiKCkge1xyXG4gICAgdGhpcy5zZXR0aW5nc1RhYiA9IG5ldyBTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKTtcclxuICAgIHRoaXMuYWRkU2V0dGluZ1RhYih0aGlzLnNldHRpbmdzVGFiKTtcclxuICB9XHJcblxyXG4gIC8vIGdldFNlYXJjaEhlYWRlcigpOiB0eXBlb2YgU2VhcmNoSGVhZGVyRE9NIHtcclxuICAvLyAgIGxldCBzZWFyY2hIZWFkZXI6IGFueSA9ICh0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFwic2VhcmNoXCIpPy5maXJzdCgpPy52aWV3IGFzIFNlYXJjaFZpZXcpPy5oZWFkZXJEb207XHJcbiAgLy8gICByZXR1cm4gc2VhcmNoSGVhZGVyPy5jb25zdHJ1Y3RvcjtcclxuICAvLyB9XHJcblxyXG4gIGdldFNlYXJjaEV4cG9ydCgpIHtcclxuICAgIGNvbnN0IHBsdWdpbiA9IHRoaXM7XHJcbiAgICBsZXQgc2VhcmNoVmlldzogYW55ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShcInNlYXJjaFwiKT8uZmlyc3QoKT8udmlldztcclxuICAgIGxldCB1bmluc3RhbGwgPSBhcm91bmQoTW9kYWwucHJvdG90eXBlLCB7XHJcbiAgICAgIG9wZW4ob2xkOiBhbnkpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICAgICAgICBwbHVnaW4uU2VhcmNoUmVzdWx0c0V4cG9ydCA9IHRoaXMuY29uc3RydWN0b3I7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gICAgc2VhcmNoVmlldz8ub25Db3B5UmVzdWx0c0NsaWNrKG5ldyBNb3VzZUV2ZW50KG51bGwpKTtcclxuICAgIHVuaW5zdGFsbCgpO1xyXG4gIH1cclxuXHJcbiAgb251bmxvYWQoKTogdm9pZCB7fVxyXG5cclxuICBwYXRjaE5hdGl2ZVNlYXJjaChzZWFyY2hWaWV3OiBTZWFyY2hWaWV3KSB7XHJcbiAgICBjb25zdCBwbHVnaW4gPSB0aGlzO1xyXG4gICAgdGhpcy5yZWdpc3RlcihcclxuICAgICAgYXJvdW5kKHNlYXJjaFZpZXcuY29uc3RydWN0b3IucHJvdG90eXBlLCB7XHJcbiAgICAgICAgb25SZXNpemUob2xkOiBhbnkpIHtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJnczogYW55W10pIHtcclxuICAgICAgICAgICAgLy8gdGhpcyB3b3JrcyBhcm91bmQgbWVhc3VyZW1lbnQgaXNzdWVzIHdoZW4gdGhlIHNlYXJjaCBlbCB3aWR0aFxyXG4gICAgICAgICAgICAvLyBnb2VzIHRvIHplcm8gYW5kIHRoZW4gYmFjayB0byBhIG5vbiB6ZXJvIHZhbHVlXHJcbiAgICAgICAgICAgIGNvbnN0IF9jaGlsZHJlbiA9IGlzRmlmdGVlblBsdXMgPyB0aGlzLmRvbS52Q2hpbGRyZW4/Ll9jaGlsZHJlbiA6IHRoaXMuZG9tLmNoaWxkcmVuO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kb20uZWwuY2xpZW50V2lkdGggPT09IDApIHtcclxuICAgICAgICAgICAgICBfY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQuc2V0Q29sbGFwc2UodHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIHRoaXMuZG9tLmhpZGRlbiA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5kb20uaGlkZGVuKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5kb20uaGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgLy8gaWYgd2UgdG9nZ2xlIHRvbyBxdWlja2x5LCBtZWFzdXJlbWVudCBoYXBwZW5zIGJlZm9yZSB3ZSB3YW50IGl0IHRvXHJcbiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBfY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBjaGlsZC5zZXRDb2xsYXBzZSh0aGlzLmRvbS5jb2xsYXBzZUFsbCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gb2xkLmNhbGwodGhpcywgLi4uYXJncyk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3RvcFNlYXJjaChvbGQ6IGFueSkge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzOiBhbnlbXSkge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvbGQuY2FsbCh0aGlzLCAuLi5hcmdzKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDb21wb25lbnQudW5sb2FkKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDb21wb25lbnQgPSBuZXcgQ29tcG9uZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhZGRDaGlsZChvbGQ6IGFueSkge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzOiBhbnlbXSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGlmICghdGhpcy5wYXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucmVuZGVyQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ29tcG9uZW50ID0gbmV3IENvbXBvbmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNvbXBvbmVudC5sb2FkKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhdGNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kb20ucGFyZW50ID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHBsdWdpbi5wYXRjaFNlYXJjaFJlc3VsdERPTSh0aGlzLmRvbS5jb25zdHJ1Y3Rvcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJlbmRlck1hcmtkb3duID0gZnVuY3Rpb24gKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IF9jaGlsZHJlbiA9IGlzRmlmdGVlblBsdXMgPyB0aGlzLmRvbS52Q2hpbGRyZW4/Ll9jaGlsZHJlbiA6IHRoaXMuZG9tLmNoaWxkcmVuO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRvbS5yZW5kZXJNYXJrZG93biA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICBfY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLnJlbmRlckNvbnRlbnRNYXRjaGVzKCk7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRvbS5pbmZpbml0eVNjcm9sbC5pbnZhbGlkYXRlQWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmNoaWxkcmVuRWwudG9nZ2xlQ2xhc3MoXCJjbS1wcmV2aWV3LWNvZGUtYmxvY2tcIiwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRvbS5jaGlsZHJlbkVsLnRvZ2dsZUNsYXNzKFwiaXMtcmVuZGVyZWRcIiwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAvLyB0aGlzLnJlbmRlck1hcmtkb3duQnV0dG9uRWwudG9nZ2xlQ2xhc3MoXCJpcy1hY3RpdmVcIiwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMucmVuZGVyTWFya2Rvd25CdXR0b25FbCA9IHRoaXMuaGVhZGVyRG9tLmFkZE5hdkJ1dHRvbihcInJlYWRpbmctZ2xhc3Nlc1wiLCBcIlJlbmRlciBNYXJrZG93blwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyAgIHJldHVybiB0aGlzLnNldFJlbmRlck1hcmtkb3duKCF0aGlzLmRvbS5yZW5kZXJNYXJrZG93bik7XHJcbiAgICAgICAgICAgICAgICAvLyB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgYWxsU2V0dGluZ3MgPSB7XHJcbiAgICAgICAgICAgICAgICAgIHJlbmRlck1hcmtkb3duOiBwbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFJlbmRlck1hcmtkb3duLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZXR0aW5ncykgdGhpcy5zZXR0aW5ncyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoYWxsU2V0dGluZ3MpLmZvckVhY2goKFtzZXR0aW5nLCBkZWZhdWx0VmFsdWVdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5oYXNPd25Qcm9wZXJ0eShzZXR0aW5nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Nbc2V0dGluZ10gPSBkZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2V0dGluZyA9PT0gXCJzb3J0XCIgJiYgIXNvcnRPcHRpb25zLmhhc093blByb3BlcnR5KHRoaXMuc2V0dGluZ3Muc29ydCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzW3NldHRpbmddID0gZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UmVuZGVyTWFya2Rvd24odGhpcy5zZXR0aW5ncy5yZW5kZXJNYXJrZG93bik7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb2xkLmNhbGwodGhpcywgLi4uYXJncyk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcGF0Y2hTZWFyY2hSZXN1bHRET00oU2VhcmNoUmVzdWx0OiB0eXBlb2YgU2VhcmNoUmVzdWx0RE9NKSB7XHJcbiAgICBjb25zdCBwbHVnaW4gPSB0aGlzO1xyXG4gICAgbGV0IHVuaW5zdGFsbCA9IGFyb3VuZChTZWFyY2hSZXN1bHQucHJvdG90eXBlLCB7XHJcbiAgICAgIGFkZFJlc3VsdChvbGQ6IGFueSkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJnczogYW55W10pIHtcclxuICAgICAgICAgIHVuaW5zdGFsbCgpO1xyXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gb2xkLmNhbGwodGhpcywgLi4uYXJncyk7XHJcbiAgICAgICAgICBsZXQgU2VhcmNoUmVzdWx0SXRlbSA9IHJlc3VsdC5jb25zdHJ1Y3RvcjtcclxuICAgICAgICAgIGlmICghcGx1Z2luLmlzU2VhcmNoUmVzdWx0SXRlbVBhdGNoZWQpIHBsdWdpbi5wYXRjaFNlYXJjaFJlc3VsdEl0ZW0oU2VhcmNoUmVzdWx0SXRlbSk7XHJcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICAgIHRoaXMucmVnaXN0ZXIodW5pbnN0YWxsKTtcclxuICAgIHRoaXMucmVnaXN0ZXIoXHJcbiAgICAgIGFyb3VuZChTZWFyY2hSZXN1bHQucHJvdG90eXBlLCB7XHJcbiAgICAgICAgc3RhcnRMb2FkZXIob2xkOiBhbnkpIHtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJnczogYW55W10pIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBsZXQgY29udGFpbmVyRWwgPSB0aGlzLmVsLmNsb3Nlc3QoXCIuYmFja2xpbmstcGFuZVwiKTtcclxuICAgICAgICAgICAgICBsZXQgYmFja2xpbmtzSW5zdGFuY2UgPSBiYWNrbGlua0RvbXMuZ2V0KGNvbnRhaW5lckVsKTtcclxuICAgICAgICAgICAgICBpZiAoY29udGFpbmVyRWwgJiYgYmFja2xpbmtzSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChiYWNrbGlua3NJbnN0YW5jZS5wYXRjaGVkKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVCYWNrbGlua3ModGhpcywgcGx1Z2luLCBjb250YWluZXJFbCwgYmFja2xpbmtzSW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoIXRoaXMucGF0Y2hlZCAmJiB0aGlzLmVsLnBhcmVudEVsZW1lbnQ/Lmhhc0NsYXNzKFwiaW50ZXJuYWwtcXVlcnlcIikpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsPy5jbG9zZXN0KFwiLmludGVybmFsLXF1ZXJ5XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMucGF0Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgIGxldCBkZWZhdWx0SGVhZGVyRWwgPSB0aGlzLmVsLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbnRlcm5hbC1xdWVyeS1oZWFkZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RXh0cmFDb250ZXh0ID0gZnVuY3Rpb24gKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX2NoaWxkcmVuID0gaXNGaWZ0ZWVuUGx1cyA/IHRoaXMudkNoaWxkcmVuPy5fY2hpbGRyZW4gOiB0aGlzLmNoaWxkcmVuO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFDb250ZXh0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5leHRyYUNvbnRleHRCdXR0b25FbC50b2dnbGVDbGFzcyhcImlzLWFjdGl2ZVwiLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2NoaWxkcmVuLmZvckVhY2goKGNoaWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLnNldEV4dHJhQ29udGV4dCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmZpbml0eVNjcm9sbC5pbnZhbGlkYXRlQWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VGl0bGVEaXNwbGF5ID0gZnVuY3Rpb24gKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93VGl0bGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNob3dUaXRsZUJ1dHRvbkVsLnRvZ2dsZUNsYXNzKFwiaXMtYWN0aXZlXCIsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0SGVhZGVyRWwudG9nZ2xlQ2xhc3MoXCJpcy1oaWRkZW5cIiwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnNldFJlc3VsdHNEaXNwbGF5ID0gZnVuY3Rpb24gKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93UmVzdWx0cyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuc2hvd1Jlc3VsdHNCdXR0b25FbC50b2dnbGVDbGFzcyhcImlzLWFjdGl2ZVwiLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbC50b2dnbGVDbGFzcyhcImlzLWhpZGRlblwiLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UmVuZGVyTWFya2Rvd24gPSBmdW5jdGlvbiAodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck1hcmtkb3duID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX2NoaWxkcmVuID0gaXNGaWZ0ZWVuUGx1cyA/IHRoaXMudkNoaWxkcmVuPy5fY2hpbGRyZW4gOiB0aGlzLmNoaWxkcmVuO1xyXG4gICAgICAgICAgICAgICAgICAgIF9jaGlsZHJlbi5mb3JFYWNoKChjaGlsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5yZW5kZXJDb250ZW50TWF0Y2hlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5maW5pdHlTY3JvbGwuaW52YWxpZGF0ZUFsbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5FbC50b2dnbGVDbGFzcyhcImNtLXByZXZpZXctY29kZS1ibG9ja1wiLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGlsZHJlbkVsLnRvZ2dsZUNsYXNzKFwiaXMtcmVuZGVyZWRcIiwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMucmVuZGVyTWFya2Rvd25CdXR0b25FbC50b2dnbGVDbGFzcyhcImlzLWFjdGl2ZVwiLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29sbGFwc2VBbGwgPSBmdW5jdGlvbiAodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBfY2hpbGRyZW4gPSBpc0ZpZnRlZW5QbHVzID8gdGhpcy52Q2hpbGRyZW4/Ll9jaGlsZHJlbiA6IHRoaXMuY2hpbGRyZW47XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5jb2xsYXBzZUFsbEJ1dHRvbkVsLnRvZ2dsZUNsYXNzKFwiaXMtYWN0aXZlXCIsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlQWxsID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgX2NoaWxkcmVuLmZvckVhY2goKGNoaWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLnNldENvbGxhcHNlKHZhbHVlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmZpbml0eVNjcm9sbC5pbnZhbGlkYXRlQWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U29ydE9yZGVyID0gKHNvcnRUeXBlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRPcmRlciA9IHNvcnRUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5maW5pdHlTY3JvbGwuaW52YWxpZGF0ZUFsbCgpO1xyXG4gICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLm9uQ29weVJlc3VsdHNDbGljayA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IHBsdWdpbi5TZWFyY2hSZXN1bHRzRXhwb3J0KHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XHJcbiAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgIC8vIGxldCBfU2VhcmNoSGVhZGVyRE9NID0gcGx1Z2luLlNlYXJjaEhlYWRlckRPTSA/IHBsdWdpbi5TZWFyY2hIZWFkZXJET00gOiBwbHVnaW4uZ2V0U2VhcmNoSGVhZGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgIC8vIGxldCBoZWFkZXJEb20gPSAodGhpcy5oZWFkZXJEb20gPSBuZXcgX1NlYXJjaEhlYWRlckRPTSh0aGlzLmFwcCwgdGhpcy5lbC5wYXJlbnRFbGVtZW50KSk7XHJcbiAgICAgICAgICAgICAgICAgIC8vIGRlZmF1bHRIZWFkZXJFbC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmVuZFwiLCBoZWFkZXJEb20ubmF2SGVhZGVyRWwpO1xyXG4gICAgICAgICAgICAgICAgICAvLyB0aGlzLmNvbGxhcHNlQWxsQnV0dG9uRWwgPSBoZWFkZXJEb20uYWRkTmF2QnV0dG9uKFxyXG4gICAgICAgICAgICAgICAgICAvLyAgIFwiYnVsbGV0LWxpc3RcIixcclxuICAgICAgICAgICAgICAgICAgLy8gICB0cmFuc2xhdGUoXCJwbHVnaW5zLnNlYXJjaC5sYWJlbC1jb2xsYXBzZS1yZXN1bHRzXCIpLFxyXG4gICAgICAgICAgICAgICAgICAvLyAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiB0aGlzLnNldENvbGxhcHNlQWxsKCF0aGlzLmNvbGxhcHNlQWxsKTtcclxuICAgICAgICAgICAgICAgICAgLy8gICB9XHJcbiAgICAgICAgICAgICAgICAgIC8vICk7XHJcbiAgICAgICAgICAgICAgICAgIC8vIHRoaXMuZXh0cmFDb250ZXh0QnV0dG9uRWwgPSBoZWFkZXJEb20uYWRkTmF2QnV0dG9uKFxyXG4gICAgICAgICAgICAgICAgICAvLyAgIFwiZXhwYW5kLXZlcnRpY2FsbHlcIixcclxuICAgICAgICAgICAgICAgICAgLy8gICB0cmFuc2xhdGUoXCJwbHVnaW5zLnNlYXJjaC5sYWJlbC1tb3JlLWNvbnRleHRcIiksXHJcbiAgICAgICAgICAgICAgICAgIC8vICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAvLyAgICAgcmV0dXJuIHRoaXMuc2V0RXh0cmFDb250ZXh0KCF0aGlzLmV4dHJhQ29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgIC8vICAgfVxyXG4gICAgICAgICAgICAgICAgICAvLyApO1xyXG4gICAgICAgICAgICAgICAgICAvLyBoZWFkZXJEb20uYWRkU29ydEJ1dHRvbihcclxuICAgICAgICAgICAgICAgICAgLy8gICAoc29ydFR5cGU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAvLyAgICAgcmV0dXJuIHRoaXMuc2V0U29ydE9yZGVyKHNvcnRUeXBlKTtcclxuICAgICAgICAgICAgICAgICAgLy8gICB9LFxyXG4gICAgICAgICAgICAgICAgICAvLyAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiB0aGlzLnNvcnRPcmRlcjtcclxuICAgICAgICAgICAgICAgICAgLy8gICB9XHJcbiAgICAgICAgICAgICAgICAgIC8vICk7XHJcbiAgICAgICAgICAgICAgICAgIC8vIHRoaXMuc2hvd1RpdGxlQnV0dG9uRWwgPSBoZWFkZXJEb20uYWRkTmF2QnV0dG9uKFwic3RyaWtldGhyb3VnaC1nbHlwaFwiLCBcIkhpZGUgdGl0bGVcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAvLyAgIHJldHVybiB0aGlzLnNldFRpdGxlRGlzcGxheSghdGhpcy5zaG93VGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zaG93UmVzdWx0c0J1dHRvbkVsID0gaGVhZGVyRG9tLmFkZE5hdkJ1dHRvbihcIm1pbnVzLXdpdGgtY2lyY2xlXCIsIFwiSGlkZSByZXN1bHRzXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgLy8gICByZXR1cm4gdGhpcy5zZXRSZXN1bHRzRGlzcGxheSghdGhpcy5zaG93UmVzdWx0cyk7XHJcbiAgICAgICAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAgICAgICAgICAvLyB0aGlzLnJlbmRlck1hcmtkb3duQnV0dG9uRWwgPSBoZWFkZXJEb20uYWRkTmF2QnV0dG9uKFwicmVhZGluZy1nbGFzc2VzXCIsIFwiUmVuZGVyIE1hcmtkb3duXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgLy8gICByZXR1cm4gdGhpcy5zZXRSZW5kZXJNYXJrZG93bighdGhpcy5yZW5kZXJNYXJrZG93bik7XHJcbiAgICAgICAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAgICAgICAgICAvLyBoZWFkZXJEb20uYWRkTmF2QnV0dG9uKFwiZG9jdW1lbnRzXCIsIFwiQ29weSByZXN1bHRzXCIsIHRoaXMub25Db3B5UmVzdWx0c0NsaWNrLmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgICBsZXQgYWxsU2V0dGluZ3MgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0SGlkZVJlc3VsdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sbGFwc2VkOiBwbHVnaW4uc2V0dGluZ3MuZGVmYXVsdENvbGxhcHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IHBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0U2hvd0NvbnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZVRpdGxlOiBwbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEhpZGVUaXRsZSxcclxuICAgICAgICAgICAgICAgICAgICBoaWRlUmVzdWx0czogcGx1Z2luLnNldHRpbmdzLmRlZmF1bHRIaWRlUmVzdWx0cyxcclxuICAgICAgICAgICAgICAgICAgICByZW5kZXJNYXJrZG93bjogcGx1Z2luLnNldHRpbmdzLmRlZmF1bHRSZW5kZXJNYXJrZG93bixcclxuICAgICAgICAgICAgICAgICAgICBzb3J0OiBwbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFNvcnRPcmRlcixcclxuICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzKSB0aGlzLnNldHRpbmdzID0ge307XHJcbiAgICAgICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGFsbFNldHRpbmdzKS5mb3JFYWNoKChbc2V0dGluZywgZGVmYXVsdFZhbHVlXSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5oYXNPd25Qcm9wZXJ0eShzZXR0aW5nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5nc1tzZXR0aW5nXSA9IGRlZmF1bHRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNldHRpbmcgPT09IFwic29ydFwiICYmICFzb3J0T3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSh0aGlzLnNldHRpbmdzLnNvcnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzW3NldHRpbmddID0gZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RXh0cmFDb250ZXh0KHRoaXMuc2V0dGluZ3MuY29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuc29ydE9yZGVyID0gdGhpcy5zZXR0aW5ncy5zb3J0O1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnNldENvbGxhcHNlQWxsKHRoaXMuc2V0dGluZ3MuY29sbGFwc2VkKTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUaXRsZURpc3BsYXkodGhpcy5zZXR0aW5ncy5oaWRlVGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnNldFJlbmRlck1hcmtkb3duKHRoaXMuc2V0dGluZ3MucmVuZGVyTWFya2Rvd24pO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnNldFJlc3VsdHNEaXNwbGF5KHRoaXMuc2V0dGluZ3MuaGlkZVJlc3VsdHMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb2xkLmNhbGwodGhpcywgLi4uYXJncyk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcGF0Y2hTZWFyY2hSZXN1bHRJdGVtKFNlYXJjaFJlc3VsdEl0ZW1DbGFzczogdHlwZW9mIFNlYXJjaFJlc3VsdEl0ZW0pIHtcclxuICAgIHRoaXMuaXNTZWFyY2hSZXN1bHRJdGVtUGF0Y2hlZCA9IHRydWU7XHJcbiAgICBjb25zdCBwbHVnaW4gPSB0aGlzO1xyXG4gICAgbGV0IHVuaW5zdGFsbCA9IGFyb3VuZChTZWFyY2hSZXN1bHRJdGVtQ2xhc3MucHJvdG90eXBlLCB7XHJcbiAgICAgIG9uUmVzdWx0Q2xpY2sob2xkOiBhbnkpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50OiBNb3VzZUV2ZW50LCBlOiBhbnksIC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIC8vIFRPRE86IEltcHJvdmUgdGhpcyBleGNsdXNpb24gbGlzdCB3aGljaCBhbGxvd3MgZm9yIGNsaWNraW5nXHJcbiAgICAgICAgICAgIC8vICAgICAgIG9uIGVsZW1lbnRzIHdpdGhvdXQgbmF2aWdhdGluZyB0byB0aGUgbWF0Y2ggcmVzdWx0XHJcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmXHJcbiAgICAgICAgICAgIChldmVudC50YXJnZXQuaGFzQ2xhc3MoXCJpbnRlcm5hbC1saW5rXCIpIHx8XHJcbiAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0Lmhhc0NsYXNzKFwidGFzay1saXN0LWl0ZW0tY2hlY2tib3hcIikgfHxcclxuICAgICAgICAgICAgICBldmVudC50YXJnZXQuaGFzQ2xhc3MoXCJhZG1vbml0aW9uLXRpdGxlLWNvbnRlbnRcIikpXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvbGQuY2FsbCh0aGlzLCBldmVudCwgZSwgLi4uYXJncyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuICAgICAgcmVuZGVyQ29udGVudE1hdGNoZXMob2xkOiBhbnkpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICAgICAgICAvLyBUT0RPOiBNb3ZlIHRoaXMgdG8gaXRzIG93biBhcm91bmQgcmVnaXN0cmF0aW9uIGFuZCB1bmluc3RhbGwgb24gcGF0Y2hcclxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9sZC5jYWxsKHRoaXMsIC4uLmFyZ3MpO1xyXG4gICAgICAgICAgY29uc3QgX2NoaWxkcmVuID0gaXNGaWZ0ZWVuUGx1cyA/IHRoaXMudkNoaWxkcmVuPy5fY2hpbGRyZW4gOiB0aGlzLmNoaWxkcmVuO1xyXG4gICAgICAgICAgaWYgKCFwbHVnaW4uaXNTZWFyY2hSZXN1bHRJdGVtTWF0Y2hQYXRjaGVkICYmIF9jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbGV0IFNlYXJjaFJlc3VsdEl0ZW1NYXRjaCA9IF9jaGlsZHJlbi5maXJzdCgpLmNvbnN0cnVjdG9yO1xyXG4gICAgICAgICAgICBwbHVnaW4ucGF0Y2hTZWFyY2hSZXN1bHRJdGVtTWF0Y2goU2VhcmNoUmVzdWx0SXRlbU1hdGNoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gICAgcGx1Z2luLnJlZ2lzdGVyKHVuaW5zdGFsbCk7XHJcbiAgfVxyXG5cclxuICBwYXRjaFNlYXJjaFJlc3VsdEl0ZW1NYXRjaChTZWFyY2hSZXN1bHRJdGVtTWF0Y2g6IGFueSkge1xyXG4gICAgdGhpcy5pc1NlYXJjaFJlc3VsdEl0ZW1NYXRjaFBhdGNoZWQgPSB0cnVlO1xyXG4gICAgY29uc3QgcGx1Z2luID0gdGhpcztcclxuICAgIHBsdWdpbi5yZWdpc3RlcihcclxuICAgICAgYXJvdW5kKFNlYXJjaFJlc3VsdEl0ZW1NYXRjaC5wcm90b3R5cGUsIHtcclxuICAgICAgICByZW5kZXIob2xkOiBhbnkpIHtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJnczogYW55W10pIHtcclxuICAgICAgICAgICAgLy8gTk9URTogaWYgd2UgZG9uJ3QgbWFuZ2xlIGBgYHF1ZXJ5IGJsb2Nrcywgd2UgY291bGQgZW5kIHVwIHdpdGggaW5maW5pdGUgcXVlcnkgcmVjdXJzaW9uXHJcbiAgICAgICAgICAgIGxldCBfcGFyZW50ID0gaXNGaWZ0ZWVuUGx1cyA/IHRoaXMucGFyZW50RG9tIDogdGhpcy5wYXJlbnQ7XHJcbiAgICAgICAgICAgIGxldCBjb250ZW50ID0gX3BhcmVudC5jb250ZW50LnN1YnN0cmluZyh0aGlzLnN0YXJ0LCB0aGlzLmVuZCkucmVwbGFjZShcImBgYHF1ZXJ5XCIsIFwiXFxcXGBcXFxcYFxcXFxgcXVlcnlcIik7XHJcbiAgICAgICAgICAgIGxldCBsZWFkaW5nU3BhY2VzID0gY29udGVudC5tYXRjaCgvXlxccysvZyk/LmZpcnN0KCk7XHJcbiAgICAgICAgICAgIGlmIChsZWFkaW5nU3BhY2VzKSB7XHJcbiAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShuZXcgUmVnRXhwKGBeJHtsZWFkaW5nU3BhY2VzfWAsIFwiZ21cIiksIFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBwYXJlbnRDb21wb25lbnQgPSBfcGFyZW50LnBhcmVudC5wYXJlbnQ7XHJcbiAgICAgICAgICAgIGlmIChwYXJlbnRDb21wb25lbnQgJiYgX3BhcmVudC5wYXJlbnQucmVuZGVyTWFya2Rvd24pIHtcclxuICAgICAgICAgICAgICBsZXQgY29tcG9uZW50ID0gcGFyZW50Q29tcG9uZW50Py5yZW5kZXJDb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgdGhpcy5lbC5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgIGxldCByZW5kZXJlciA9IG5ldyBTZWFyY2hNYXJrZG93blJlbmRlcmVyKHBsdWdpbi5hcHAsIHRoaXMuZWwsIHRoaXMpO1xyXG4gICAgICAgICAgICAgIHJlbmRlcmVyLm9uUmVuZGVyQ29tcGxldGUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBTZWUgaWYgd2UgY2FuIGltcHJvdmUgbWVhc3VyZW1lbnRcclxuICAgICAgICAgICAgICAgIC8vIEl0IGV4aXN0cyBiZWNhdXNlIHRoZSBtYXJrZG93biByZW5kZXJlciBpcyByZW5kZXJpbmcgYXN5bmNcclxuICAgICAgICAgICAgICAgIC8vIGFuZCB0aGUgbWVhc3VyZW1lbnQgcHJvY2Vzc2VzIGFyZSBoYXBwZW5pbmcgYmVmb3JlIHRoZSBjb250ZW50IGhhcyBiZWVuIHJlbmRlcmVkXHJcbiAgICAgICAgICAgICAgICBfcGFyZW50Py5wYXJlbnQ/LmluZmluaXR5U2Nyb2xsLm1lYXN1cmUoX3BhcmVudCwgdGhpcyk7XHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICBjb21wb25lbnQuYWRkQ2hpbGQocmVuZGVyZXIpO1xyXG4gICAgICAgICAgICAgIHJlbmRlcmVyLnJlbmRlcmVyLnNldChjb250ZW50KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZXR1cm4gb2xkLmNhbGwodGhpcywgLi4uYXJncyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSxcclxuICAgICAgfSlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwYXRjaFNlYXJjaFZpZXcoZW1iZWRkZWRTZWFyY2g6IEVtYmVkZGVkU2VhcmNoQ2xhc3MpIHtcclxuICAgIGNvbnN0IHBsdWdpbiA9IHRoaXM7XHJcbiAgICBjb25zdCBFbWJlZGRlZFNlYXJjaCA9IGVtYmVkZGVkU2VhcmNoLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBFbWJlZGRlZFNlYXJjaENsYXNzO1xyXG4gICAgY29uc3QgU2VhcmNoUmVzdWx0ID0gZW1iZWRkZWRTZWFyY2guZG9tLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBTZWFyY2hSZXN1bHRET007XHJcblxyXG4gICAgdGhpcy5yZWdpc3RlcihcclxuICAgICAgYXJvdW5kKEVtYmVkZGVkU2VhcmNoLnByb3RvdHlwZSwge1xyXG4gICAgICAgIG9udW5sb2FkKG9sZDogYW55KSB7XHJcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlckNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgIHRoaXMucmVuZGVyQ29tcG9uZW50LnVubG9hZCgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuZG9tID0gbnVsbDtcclxuICAgICAgICAgICAgICB0aGlzLnF1ZXVlID0gbnVsbDtcclxuICAgICAgICAgICAgICB0aGlzLnJlbmRlckNvbXBvbmVudCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgdGhpcy5fY2hpbGRyZW4gPSBudWxsO1xyXG4gICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvbGQuY2FsbCh0aGlzLCAuLi5hcmdzKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbmxvYWQob2xkOiBhbnkpIHtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJnczogYW55W10pIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBpZiAoIXRoaXMucmVuZGVyQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNvbXBvbmVudCA9IG5ldyBDb21wb25lbnQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ29tcG9uZW50LmxvYWQoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgdGhpcy5kb20ucGFyZW50ID0gdGhpcztcclxuICAgICAgICAgICAgICBsZXQgZGVmYXVsdEhlYWRlckVsID0gdGhpcy5jb250YWluZXJFbC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICAgICAgICBcIi5pbnRlcm5hbC1xdWVyeS1oZWFkZXJcIlxyXG4gICAgICAgICAgICAgICkgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgbGV0IG1hdGNoZXMgPSB0aGlzLnF1ZXJ5Lm1hdGNoQWxsKFxyXG4gICAgICAgICAgICAgICAgL14oPzxrZXk+Y29sbGFwc2VkfGNvbnRleHR8aGlkZVRpdGxlfHJlbmRlck1hcmtkb3dufGhpZGVSZXN1bHRzfHNvcnR8dGl0bGUpOlxccyooPzx2YWx1ZT4uKz8pJC9nbVxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgbGV0IHNldHRpbmdzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XHJcbiAgICAgICAgICAgICAgZm9yIChsZXQgbWF0Y2ggb2YgbWF0Y2hlcykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gbWF0Y2guZ3JvdXBzLnZhbHVlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwidHJ1ZVwiIHx8IHZhbHVlID09PSBcImZhbHNlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgbWF0Y2guZ3JvdXBzLnZhbHVlID0gdmFsdWUgPT09IFwidHJ1ZVwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3NbbWF0Y2guZ3JvdXBzLmtleV0gPSBtYXRjaC5ncm91cHMudmFsdWU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHRoaXMucXVlcnkgPSB0aGlzLnF1ZXJ5XHJcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXigoY29sbGFwc2VkfGNvbnRleHR8aGlkZVRpdGxlfHJlbmRlck1hcmtkb3dufGhpZGVSZXN1bHRzfHNvcnR8dGl0bGUpOi4rPykkL2dtLCBcIlwiKVxyXG4gICAgICAgICAgICAgICAgLnRyaW0oKTtcclxuICAgICAgICAgICAgICBkZWZhdWx0SGVhZGVyRWwuc2V0VGV4dChzZXR0aW5ncy50aXRsZSB8fCB0aGlzLnF1ZXJ5KTtcclxuICAgICAgICAgICAgICB0aGlzLmRvbS5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgICAgICAgICB9IGNhdGNoIHt9XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9sZC5jYWxsKHRoaXMsIC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9LFxyXG4gICAgICB9KVxyXG4gICAgKTtcclxuICAgIHRoaXMucGF0Y2hTZWFyY2hSZXN1bHRET00oU2VhcmNoUmVzdWx0KTtcclxuICB9XHJcblxyXG4gIHBhdGNoQmFja2xpbmtzVmlldyhiYWNrbGlua3M6IEJhY2tsaW5rc0NsYXNzKSB7XHJcbiAgICBjb25zdCBwbHVnaW4gPSB0aGlzO1xyXG4gICAgY29uc3QgQmFja2xpbmsgPSBiYWNrbGlua3MuY29uc3RydWN0b3IgYXMgdHlwZW9mIEVtYmVkZGVkU2VhcmNoQ2xhc3M7XHJcbiAgICBjb25zdCBCYWNrbGlua0RPTSA9IGJhY2tsaW5rcy5iYWNrbGlua0RvbS5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgQmFja2xpbmtET01DbGFzcztcclxuXHJcbiAgICB0aGlzLnJlZ2lzdGVyKFxyXG4gICAgICBhcm91bmQoQmFja2xpbmsucHJvdG90eXBlLCB7XHJcbiAgICAgICAgb251bmxvYWQob2xkOiBhbnkpIHtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJnczogYW55W10pIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDb21wb25lbnQudW5sb2FkKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5kb20gPSBudWxsO1xyXG4gICAgICAgICAgICAgIHRoaXMucXVldWUgPSBudWxsO1xyXG4gICAgICAgICAgICAgIHRoaXMucmVuZGVyQ29tcG9uZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgICB0aGlzLl9jaGlsZHJlbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9sZC5jYWxsKHRoaXMsIC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9ubG9hZChvbGQ6IGFueSkge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzOiBhbnlbXSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGlmICghdGhpcy5yZW5kZXJDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ29tcG9uZW50ID0gbmV3IENvbXBvbmVudCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDb21wb25lbnQubG9hZCgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB0aGlzLmJhY2tsaW5rRG9tLnBhcmVudCA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgdGhpcy51bmxpbmtlZERvbS5wYXJlbnQgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgICBsZXQgc2V0dGluZ3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcclxuXHJcbiAgICAgICAgICAgICAgdGhpcy5kb20uc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgICAgICAgICAgfSBjYXRjaCB7fVxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvbGQuY2FsbCh0aGlzLCAuLi5hcmdzKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSxcclxuICAgICAgfSlcclxuICAgICk7XHJcbiAgICB0aGlzLnBhdGNoU2VhcmNoUmVzdWx0RE9NKEJhY2tsaW5rRE9NKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUJhY2tsaW5rcyhcclxuICBpbnN0YW5jZTogQmFja2xpbmtET01DbGFzcyxcclxuICBwbHVnaW46IEVtYmVkZGVkUXVlcnlDb250cm9sUGx1Z2luLFxyXG4gIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcclxuICBiYWNrbGlua3NJbnN0YW5jZTogQmFja2xpbmtzQ2xhc3NcclxuKSB7XHJcbiAgaWYgKGJhY2tsaW5rc0luc3RhbmNlKSB7XHJcbiAgICBiYWNrbGlua3NJbnN0YW5jZS5wYXRjaGVkID0gdHJ1ZTtcclxuICAgIGxldCBkZWZhdWx0SGVhZGVyRWwgPVxyXG4gICAgICBjb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFwiLmludGVybmFsLXF1ZXJ5LWhlYWRlclwiKSB8fCBjb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFwiLm5hdi1oZWFkZXJcIik7XHJcbiAgICBpbnN0YW5jZS5zZXRSZW5kZXJNYXJrZG93biA9IGZ1bmN0aW9uICh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICBjb25zdCBkb21zID0gW2JhY2tsaW5rc0luc3RhbmNlLmJhY2tsaW5rRG9tLCBiYWNrbGlua3NJbnN0YW5jZS51bmxpbmtlZERvbV07XHJcbiAgICAgIGRvbXMuZm9yRWFjaChkb20gPT4ge1xyXG4gICAgICAgIGRvbS5yZW5kZXJNYXJrZG93biA9IHZhbHVlO1xyXG4gICAgICAgIGNvbnN0IF9jaGlsZHJlbiA9IGlzRmlmdGVlblBsdXMgPyBkb20udkNoaWxkcmVuPy5fY2hpbGRyZW4gOiBkb20uY2hpbGRyZW47XHJcbiAgICAgICAgX2NoaWxkcmVuLmZvckVhY2goKGNoaWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgIGNoaWxkLnJlbmRlckNvbnRlbnRNYXRjaGVzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZG9tLmluZmluaXR5U2Nyb2xsLmludmFsaWRhdGVBbGwoKTtcclxuICAgICAgICBkb20uY2hpbGRyZW5FbC50b2dnbGVDbGFzcyhcImNtLXByZXZpZXctY29kZS1ibG9ja1wiLCB2YWx1ZSk7XHJcbiAgICAgICAgZG9tLmNoaWxkcmVuRWwudG9nZ2xlQ2xhc3MoXCJpcy1yZW5kZXJlZFwiLCB2YWx1ZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnJlbmRlck1hcmtkb3duQnV0dG9uRWwudG9nZ2xlQ2xhc3MoXCJpcy1hY3RpdmVcIiwgdmFsdWUpO1xyXG4gICAgfTtcclxuICAgIGluc3RhbmNlLm9uQ29weVJlc3VsdHNDbGljayA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBuZXcgcGx1Z2luLlNlYXJjaFJlc3VsdHNFeHBvcnQoaW5zdGFuY2UuYXBwLCBpbnN0YW5jZSkub3BlbigpO1xyXG4gICAgfTtcclxuICAgIGluc3RhbmNlLnJlbmRlck1hcmtkb3duQnV0dG9uRWwgPSBiYWNrbGlua3NJbnN0YW5jZS5oZWFkZXJEb20uYWRkTmF2QnV0dG9uKFxyXG4gICAgICBcInJlYWRpbmctZ2xhc3Nlc1wiLFxyXG4gICAgICBcIlJlbmRlciBNYXJrZG93blwiLFxyXG4gICAgICAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlLnNldFJlbmRlck1hcmtkb3duKCFpbnN0YW5jZS5yZW5kZXJNYXJrZG93bik7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICBiYWNrbGlua3NJbnN0YW5jZS5oZWFkZXJEb20uYWRkTmF2QnV0dG9uKFwiZG9jdW1lbnRzXCIsIFwiQ29weSByZXN1bHRzXCIsIGluc3RhbmNlLm9uQ29weVJlc3VsdHNDbGljay5iaW5kKGluc3RhbmNlKSk7XHJcbiAgICBsZXQgYWxsU2V0dGluZ3MgPSB7XHJcbiAgICAgIHRpdGxlOiBwbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEhpZGVSZXN1bHRzLFxyXG4gICAgICBjb2xsYXBzZWQ6IHBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0Q29sbGFwc2UsXHJcbiAgICAgIGNvbnRleHQ6IHBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0U2hvd0NvbnRleHQsXHJcbiAgICAgIGhpZGVUaXRsZTogcGx1Z2luLnNldHRpbmdzLmRlZmF1bHRIaWRlVGl0bGUsXHJcbiAgICAgIGhpZGVSZXN1bHRzOiBwbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEhpZGVSZXN1bHRzLFxyXG4gICAgICByZW5kZXJNYXJrZG93bjogcGx1Z2luLnNldHRpbmdzLmRlZmF1bHRSZW5kZXJNYXJrZG93bixcclxuICAgICAgc29ydDogcGx1Z2luLnNldHRpbmdzLmRlZmF1bHRTb3J0T3JkZXIsXHJcbiAgICB9O1xyXG4gICAgaWYgKCFpbnN0YW5jZS5zZXR0aW5ncykgaW5zdGFuY2Uuc2V0dGluZ3MgPSB7fTtcclxuICAgIE9iamVjdC5lbnRyaWVzKGFsbFNldHRpbmdzKS5mb3JFYWNoKChbc2V0dGluZywgZGVmYXVsdFZhbHVlXSkgPT4ge1xyXG4gICAgICBpZiAoIWluc3RhbmNlLnNldHRpbmdzLmhhc093blByb3BlcnR5KHNldHRpbmcpKSB7XHJcbiAgICAgICAgaW5zdGFuY2Uuc2V0dGluZ3Nbc2V0dGluZ10gPSBkZWZhdWx0VmFsdWU7XHJcbiAgICAgIH0gZWxzZSBpZiAoc2V0dGluZyA9PT0gXCJzb3J0XCIgJiYgIXNvcnRPcHRpb25zLmhhc093blByb3BlcnR5KGluc3RhbmNlLnNldHRpbmdzLnNvcnQpKSB7XHJcbiAgICAgICAgaW5zdGFuY2Uuc2V0dGluZ3Nbc2V0dGluZ10gPSBkZWZhdWx0VmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgYmFja2xpbmtzSW5zdGFuY2Uuc2V0RXh0cmFDb250ZXh0KGluc3RhbmNlLnNldHRpbmdzLmNvbnRleHQpO1xyXG4gICAgYmFja2xpbmtzSW5zdGFuY2Uuc29ydE9yZGVyID0gaW5zdGFuY2Uuc2V0dGluZ3Muc29ydDtcclxuICAgIGJhY2tsaW5rc0luc3RhbmNlLnNldENvbGxhcHNlQWxsKGluc3RhbmNlLnNldHRpbmdzLmNvbGxhcHNlZCk7XHJcbiAgICBpbnN0YW5jZS5zZXRSZW5kZXJNYXJrZG93bihpbnN0YW5jZS5zZXR0aW5ncy5yZW5kZXJNYXJrZG93bik7XHJcbiAgfSBlbHNlIHtcclxuICB9XHJcbn1cclxuIiwgImV4cG9ydCBmdW5jdGlvbiBhcm91bmQob2JqLCBmYWN0b3JpZXMpIHtcbiAgICBjb25zdCByZW1vdmVycyA9IE9iamVjdC5rZXlzKGZhY3RvcmllcykubWFwKGtleSA9PiBhcm91bmQxKG9iaiwga2V5LCBmYWN0b3JpZXNba2V5XSkpO1xuICAgIHJldHVybiByZW1vdmVycy5sZW5ndGggPT09IDEgPyByZW1vdmVyc1swXSA6IGZ1bmN0aW9uICgpIHsgcmVtb3ZlcnMuZm9yRWFjaChyID0+IHIoKSk7IH07XG59XG5mdW5jdGlvbiBhcm91bmQxKG9iaiwgbWV0aG9kLCBjcmVhdGVXcmFwcGVyKSB7XG4gICAgY29uc3Qgb3JpZ2luYWwgPSBvYmpbbWV0aG9kXSwgaGFkT3duID0gb2JqLmhhc093blByb3BlcnR5KG1ldGhvZCk7XG4gICAgbGV0IGN1cnJlbnQgPSBjcmVhdGVXcmFwcGVyKG9yaWdpbmFsKTtcbiAgICAvLyBMZXQgb3VyIHdyYXBwZXIgaW5oZXJpdCBzdGF0aWMgcHJvcHMgZnJvbSB0aGUgd3JhcHBpbmcgbWV0aG9kLFxuICAgIC8vIGFuZCB0aGUgd3JhcHBpbmcgbWV0aG9kLCBwcm9wcyBmcm9tIHRoZSBvcmlnaW5hbCBtZXRob2RcbiAgICBpZiAob3JpZ2luYWwpXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihjdXJyZW50LCBvcmlnaW5hbCk7XG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHdyYXBwZXIsIGN1cnJlbnQpO1xuICAgIG9ialttZXRob2RdID0gd3JhcHBlcjtcbiAgICAvLyBSZXR1cm4gYSBjYWxsYmFjayB0byBhbGxvdyBzYWZlIHJlbW92YWxcbiAgICByZXR1cm4gcmVtb3ZlO1xuICAgIGZ1bmN0aW9uIHdyYXBwZXIoLi4uYXJncykge1xuICAgICAgICAvLyBJZiB3ZSBoYXZlIGJlZW4gZGVhY3RpdmF0ZWQgYW5kIGFyZSBubyBsb25nZXIgd3JhcHBlZCwgcmVtb3ZlIG91cnNlbHZlc1xuICAgICAgICBpZiAoY3VycmVudCA9PT0gb3JpZ2luYWwgJiYgb2JqW21ldGhvZF0gPT09IHdyYXBwZXIpXG4gICAgICAgICAgICByZW1vdmUoKTtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnQuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgICAgLy8gSWYgbm8gb3RoZXIgcGF0Y2hlcywganVzdCBkbyBhIGRpcmVjdCByZW1vdmFsXG4gICAgICAgIGlmIChvYmpbbWV0aG9kXSA9PT0gd3JhcHBlcikge1xuICAgICAgICAgICAgaWYgKGhhZE93bilcbiAgICAgICAgICAgICAgICBvYmpbbWV0aG9kXSA9IG9yaWdpbmFsO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmpbbWV0aG9kXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudCA9PT0gb3JpZ2luYWwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIC8vIEVsc2UgcGFzcyBmdXR1cmUgY2FsbHMgdGhyb3VnaCwgYW5kIHJlbW92ZSB3cmFwcGVyIGZyb20gdGhlIHByb3RvdHlwZSBjaGFpblxuICAgICAgICBjdXJyZW50ID0gb3JpZ2luYWw7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih3cmFwcGVyLCBvcmlnaW5hbCB8fCBGdW5jdGlvbik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZHVwZShrZXksIG9sZEZuLCBuZXdGbikge1xuICAgIGNoZWNrW2tleV0gPSBrZXk7XG4gICAgcmV0dXJuIGNoZWNrO1xuICAgIGZ1bmN0aW9uIGNoZWNrKC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIChvbGRGbltrZXldID09PSBrZXkgPyBvbGRGbiA6IG5ld0ZuKS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYWZ0ZXIocHJvbWlzZSwgY2IpIHtcbiAgICByZXR1cm4gcHJvbWlzZS50aGVuKGNiLCBjYik7XG59XG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplKGFzeW5jRnVuY3Rpb24pIHtcbiAgICBsZXQgbGFzdFJ1biA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIGZ1bmN0aW9uIHdyYXBwZXIoLi4uYXJncykge1xuICAgICAgICByZXR1cm4gbGFzdFJ1biA9IG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgICAgICAgYWZ0ZXIobGFzdFJ1biwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGFzeW5jRnVuY3Rpb24uYXBwbHkodGhpcywgYXJncykudGhlbihyZXMsIHJlaik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHdyYXBwZXIuYWZ0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBsYXN0UnVuID0gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7IGFmdGVyKGxhc3RSdW4sIHJlcyk7IH0pO1xuICAgIH07XG4gICAgcmV0dXJuIHdyYXBwZXI7XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBNYXJrZG93blJlbmRlcmVyLCByZXF1aXJlQXBpVmVyc2lvbiwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuY29uc3QgaXNGaWZ0ZWVuUGx1cyA9IHJlcXVpcmVBcGlWZXJzaW9uICYmIHJlcXVpcmVBcGlWZXJzaW9uKFwiMC4xNS4wXCIpO1xuZXhwb3J0IGNsYXNzIFNlYXJjaE1hcmtkb3duUmVuZGVyZXIgZXh0ZW5kcyBNYXJrZG93blJlbmRlcmVyIHtcbiAgYXBwOiBBcHA7XG4gIHN1YnBhdGg6IHN0cmluZztcbiAgaW5kZW50OiBzdHJpbmc7XG4gIGZpbGU6IFRGaWxlO1xuICBtYXRjaDogYW55O1xuICBmaWxlUGF0aDogc3RyaW5nO1xuICBiZWZvcmU6IHN0cmluZztcbiAgYWZ0ZXI6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBtYXRjaDogYW55KSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHN1cGVyKGFwcCwgY29udGFpbmVyRWwpO1xuICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIHRoaXMubWF0Y2ggPSBtYXRjaDtcbiAgICB0aGlzLnN1YnBhdGggPSBcIlwiO1xuICAgIHRoaXMuaW5kZW50ID0gXCJcIjtcbiAgICB0aGlzLmZpbGVQYXRoID0gaXNGaWZ0ZWVuUGx1cyA/IHRoaXMubWF0Y2gucGFyZW50RG9tLnBhdGggOiB0aGlzLm1hdGNoLnBhcmVudC5wYXRoO1xuICAgIHRoaXMuZmlsZSA9IGlzRmlmdGVlblBsdXMgPyB0aGlzLm1hdGNoLnBhcmVudERvbS5maWxlIDogdGhpcy5tYXRjaC5wYXJlbnQuZmlsZTtcbiAgICB0aGlzLnJlbmRlcmVyLnByZXZpZXdFbC5vbk5vZGVJbnNlcnRlZCgoKSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZU9wdGlvbnMoKTtcbiAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyLm9uUmVzaXplKCk7XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVPcHRpb25zKCkge1xuICAgIGxldCByZWFkYWJsZUxpbmVMZW5ndGggPSB0aGlzLmFwcC52YXVsdC5nZXRDb25maWcoXCJyZWFkYWJsZUxpbmVMZW5ndGhcIik7XG4gICAgdGhpcy5yZW5kZXJlci5wcmV2aWV3RWwudG9nZ2xlQ2xhc3MoXCJpcy1yZWFkYWJsZS1saW5lLXdpZHRoXCIsIHJlYWRhYmxlTGluZUxlbmd0aCk7XG4gICAgbGV0IGZvbGRIZWFkaW5nID0gdGhpcy5hcHAudmF1bHQuZ2V0Q29uZmlnKFwiZm9sZEhlYWRpbmdcIik7XG4gICAgdGhpcy5yZW5kZXJlci5wcmV2aWV3RWwudG9nZ2xlQ2xhc3MoXCJhbGxvdy1mb2xkLWhlYWRpbmdzXCIsIGZvbGRIZWFkaW5nKTtcbiAgICBsZXQgZm9sZEluZGVudCA9IHRoaXMuYXBwLnZhdWx0LmdldENvbmZpZyhcImZvbGRJbmRlbnRcIik7XG4gICAgdGhpcy5yZW5kZXJlci5wcmV2aWV3RWwudG9nZ2xlQ2xhc3MoXCJhbGxvdy1mb2xkLWxpc3RzXCIsIGZvbGRJbmRlbnQpO1xuICAgIHRoaXMucmVuZGVyZXIucHJldmlld0VsLnRvZ2dsZUNsYXNzKFwicnRsXCIsIHRoaXMuYXBwLnZhdWx0LmdldENvbmZpZyhcInJpZ2h0VG9MZWZ0XCIpKTtcblxuICAgIGlmICghZm9sZEhlYWRpbmcpIHtcbiAgICAgIHRoaXMucmVuZGVyZXIudW5mb2xkQWxsSGVhZGluZ3MoKTtcbiAgICB9XG5cbiAgICBpZiAoIWZvbGRJbmRlbnQpIHtcbiAgICAgIHRoaXMucmVuZGVyZXIudW5mb2xkQWxsTGlzdHMoKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlcmVyLnByZXZpZXdFbC50b2dnbGVDbGFzcyhcInNob3ctZnJvbnRtYXR0ZXJcIiwgdGhpcy5hcHAudmF1bHQuZ2V0Q29uZmlnKFwic2hvd0Zyb250bWF0dGVyXCIpKTtcbiAgICBsZXQgdGFiU2l6ZSA9IHRoaXMuYXBwLnZhdWx0LmdldENvbmZpZyhcInRhYlNpemVcIik7XG4gICAgdGhpcy5yZW5kZXJlci5wcmV2aWV3RWwuc3R5bGUudGFiU2l6ZSA9IFN0cmluZyh0YWJTaXplKTtcbiAgICB0aGlzLnJlbmRlcmVyLnJlcmVuZGVyKCk7XG4gIH1cblxuICBvblJlbmRlckNvbXBsZXRlKCkge31cblxuICBnZXRGaWxlKCkge1xuICAgIHJldHVybiB0aGlzLm1hdGNoLnBhcmVudC5maWxlO1xuICB9XG5cbiAgYXN5bmMgZWRpdChjb250ZW50OiBzdHJpbmcpIHtcbiAgICB0aGlzLnJlbmRlcmVyLnNldChjb250ZW50KTtcbiAgICBsZXQgY2FjaGVkQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQodGhpcy5maWxlKTtcbiAgICBsZXQgbWF0Y2hDb250ZW50ID0gY2FjaGVkQ29udGVudC5zbGljZSh0aGlzLm1hdGNoLnN0YXJ0LCB0aGlzLm1hdGNoLmVuZCk7XG4gICAgbGV0IGxlYWRpbmdTcGFjZXMgPSBtYXRjaENvbnRlbnQubWF0Y2goL15cXHMrL2cpPy5maXJzdCgpO1xuICAgIGlmIChsZWFkaW5nU3BhY2VzKSB7XG4gICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC9eL2dtLCBsZWFkaW5nU3BhY2VzKTtcbiAgICB9XG4gICAgbGV0IGJlZm9yZSA9IGNhY2hlZENvbnRlbnQuc2xpY2UoMCwgdGhpcy5tYXRjaC5zdGFydCk7XG4gICAgbGV0IGFmdGVyID0gY2FjaGVkQ29udGVudC5zbGljZSh0aGlzLm1hdGNoLmVuZCwgdGhpcy5tYXRjaC5wYXJlbnQuY29udGVudC5sZW5ndGgpO1xuICAgIHZhciBjb21iaW5lZENvbnRlbnQgPSBiZWZvcmUgKyBjb250ZW50ICsgYWZ0ZXI7XG4gICAgdGhpcy5hcHAudmF1bHQubW9kaWZ5KHRoaXMuZmlsZSwgY29tYmluZWRDb250ZW50KTtcbiAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IEVtYmVkZGVkUXVlcnlDb250cm9sUGx1Z2luIGZyb20gXCIuL21haW5cIjtcbmltcG9ydCB7IHRyYW5zbGF0ZSB9IGZyb20gXCIuL3V0aWxzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW1iZWRkZWRRdWVyeUNvbnRyb2xTZXR0aW5ncyB7XG4gIGRlZmF1bHRDb2xsYXBzZTogYm9vbGVhbjtcbiAgZGVmYXVsdFNob3dDb250ZXh0OiBib29sZWFuO1xuICBkZWZhdWx0SGlkZVRpdGxlOiBib29sZWFuO1xuICBkZWZhdWx0SGlkZVJlc3VsdHM6IGJvb2xlYW47XG4gIGRlZmF1bHRSZW5kZXJNYXJrZG93bjogYm9vbGVhbjtcbiAgZGVmYXVsdFNvcnRPcmRlcjogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRW1iZWRkZWRRdWVyeUNvbnRyb2xTZXR0aW5ncyA9IHtcbiAgZGVmYXVsdENvbGxhcHNlOiBmYWxzZSxcbiAgZGVmYXVsdFNob3dDb250ZXh0OiBmYWxzZSxcbiAgZGVmYXVsdEhpZGVUaXRsZTogZmFsc2UsXG4gIGRlZmF1bHRIaWRlUmVzdWx0czogZmFsc2UsXG4gIGRlZmF1bHRSZW5kZXJNYXJrZG93bjogZmFsc2UsXG4gIGRlZmF1bHRTb3J0T3JkZXI6IFwiYWxwaGFiZXRpY2FsXCIsXG59O1xuLy8gYWxwaGFiZXRpY2FsfGFscGhhYmV0aWNhbFJldmVyc2V8YnlNb2RpZmllZFRpbWV8YnlNb2RpZmllZFRpbWVSZXZlcnNlfGJ5Q3JlYXRlZFRpbWV8YnlDcmVhdGVkVGltZVJldmVyc2VcbmV4cG9ydCBjb25zdCBzb3J0T3B0aW9ucyA9IHtcbiAgYWxwaGFiZXRpY2FsOiB0cmFuc2xhdGUoXCJwbHVnaW5zLmZpbGUtZXhwbG9yZXIubGFiZWwtc29ydC1hLXRvLXpcIiksXG4gIGFscGhhYmV0aWNhbFJldmVyc2U6IHRyYW5zbGF0ZShcInBsdWdpbnMuZmlsZS1leHBsb3Jlci5sYWJlbC1zb3J0LXotdG8tYVwiKSxcbiAgYnlNb2RpZmllZFRpbWU6IHRyYW5zbGF0ZShcInBsdWdpbnMuZmlsZS1leHBsb3Jlci5sYWJlbC1zb3J0LW5ldy10by1vbGRcIiksXG4gIGJ5TW9kaWZpZWRUaW1lUmV2ZXJzZTogdHJhbnNsYXRlKFwicGx1Z2lucy5maWxlLWV4cGxvcmVyLmxhYmVsLXNvcnQtb2xkLXRvLW5ld1wiKSxcbiAgYnlDcmVhdGVkVGltZTogdHJhbnNsYXRlKFwicGx1Z2lucy5maWxlLWV4cGxvcmVyLmxhYmVsLXNvcnQtY3JlYXRlZC1uZXctdG8tb2xkXCIpLFxuICBieUNyZWF0ZWRUaW1lUmV2ZXJzZTogdHJhbnNsYXRlKFwicGx1Z2lucy5maWxlLWV4cGxvcmVyLmxhYmVsLXNvcnQtY3JlYXRlZC1vbGQtdG8tbmV3XCIpLFxufTtcblxuZXhwb3J0IGNsYXNzIFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgcGx1Z2luOiBFbWJlZGRlZFF1ZXJ5Q29udHJvbFBsdWdpbjtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFbWJlZGRlZFF1ZXJ5Q29udHJvbFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGhpZGUoKSB7fVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblxuICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkNvbGxhcHNlIHF1ZXJ5IHJlc3VsdHMgYnkgZGVmYXVsdFwiKS5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdENvbGxhcHNlKS5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRDb2xsYXBzZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiU2hvdyBhZGRpdGlvbmFsIHF1ZXJ5IHJlc3VsdCBjb250ZXh0IGJ5IGRlZmF1bHRcIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRTaG93Q29udGV4dCkub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0U2hvd0NvbnRleHQgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICB9KVxuICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkhpZGUgcXVlcnkgdGl0bGUgYnkgZGVmYXVsdFwiKS5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEhpZGVUaXRsZSkub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0SGlkZVRpdGxlID0gdmFsdWU7XG4gICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSlcbiAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJIaWRlIHF1ZXJ5IHJlc3VsdHMgYnkgZGVmYXVsdFwiKS5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEhpZGVSZXN1bHRzKS5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRIaWRlUmVzdWx0cyA9IHZhbHVlO1xuICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiUmVuZGVyIHJlc3VsdHMgYXMgTWFya2Rvd24gYnkgZGVmYXVsdFwiKS5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFJlbmRlck1hcmtkb3duKS5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRSZW5kZXJNYXJrZG93biA9IHZhbHVlO1xuICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiRGVmYXVsdCBxdWVyeSByZXN1bHQgc29ydCBvcmRlclwiKS5hZGREcm9wZG93bihjYiA9PiB7XG4gICAgICBjYi5hZGRPcHRpb25zKHNvcnRPcHRpb25zKTtcbiAgICAgIGNiLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRTb3J0T3JkZXIpO1xuICAgICAgY2Iub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFNvcnRPcmRlciBhcyBhbnkpID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsICJleHBvcnQgY29uc3QgdHJhbnNsYXRlID0gaTE4bmV4dC50LmJpbmQoaTE4bmV4dCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5JZChzaXplOiBudW1iZXIpIHtcbiAgZm9yICh2YXIgZSA9IFtdLCBuID0gMDsgbiA8IHNpemU7IG4rKykgZS5wdXNoKCgoMTYgKiBNYXRoLnJhbmRvbSgpKSB8IDApLnRvU3RyaW5nKDE2KSk7XG5cbiAgcmV0dXJuIGUuam9pbihcIlwiKTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBOzs7QUNBTyxnQkFBZ0IsS0FBSyxXQUFXO0FBQ25DLFFBQU0sV0FBVyxPQUFPLEtBQUssV0FBVyxJQUFJLFNBQU8sUUFBUSxLQUFLLEtBQUssVUFBVTtBQUMvRSxTQUFPLFNBQVMsV0FBVyxJQUFJLFNBQVMsS0FBSyxXQUFZO0FBQUUsYUFBUyxRQUFRLE9BQUs7QUFBQTtBQUFBO0FBRXJGLGlCQUFpQixLQUFLLFFBQVEsZUFBZTtBQUN6QyxRQUFNLFdBQVcsSUFBSSxTQUFTLFNBQVMsSUFBSSxlQUFlO0FBQzFELE1BQUksVUFBVSxjQUFjO0FBRzVCLE1BQUk7QUFDQSxXQUFPLGVBQWUsU0FBUztBQUNuQyxTQUFPLGVBQWUsU0FBUztBQUMvQixNQUFJLFVBQVU7QUFFZCxTQUFPO0FBQ1Asc0JBQW9CLE1BQU07QUFFdEIsUUFBSSxZQUFZLFlBQVksSUFBSSxZQUFZO0FBQ3hDO0FBQ0osV0FBTyxRQUFRLE1BQU0sTUFBTTtBQUFBO0FBRS9CLG9CQUFrQjtBQUVkLFFBQUksSUFBSSxZQUFZLFNB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
